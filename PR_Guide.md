## 코드 리뷰를 위한 가이드입니다.

- 본 문서는 보편적인 엔지니어 중심의 전사적인 코드 리뷰 정책과는 다르게 좀 더 간소화된 방식으로 가이드라인을 설정하여, 데이터 분석가의 코드 리뷰 문화를 만들어나가는 것을 목적으로 합니다.

### 1. 코드 리뷰 목적
- 코드 안정성 증가
- 코드 변경 사항을 팀원 분들과 함께 검토하면서 잠재적인 오류를 발견하여 장애를 사전에 예방할 수 있다.
- 팀 코드 스타일의 일관성 유지
- 팀의 코딩 스타일을 함께 만들어나가면서, 그 과정에서 코드의 일관성, 가독성, 유지보수성을 개선할 수 있다.
-  서로의 코드를 통해 함께 성장
- 코드를 검토하는 과정에서 지식 공유가 이뤄지고, 서로 다른 시각과 경험을 공유하면서 함께 성장할 수 있다.

### 2. 코드 리뷰 절차

#### 2.1. Repos 개인 브랜치에서 feature 브랜치 생성
- Create Branch 버튼을 통해 feature 브랜치를 생성하며, 반드시 main 으로부터 신규 브랜치가 생성되어야 한다.

#### 2.2. 작업 환경 변경 및 코드 수정  
- 브랜치 네이밍은 “닉네임-이슈번호” 로 생성하여 작업한다.
- Repos 에서 본인이 신규로 생성한 브랜치로 작업 환경을 변경한다.

#### 2.3. 코드 수정 사항을 feature 브랜치에 commit
- Repos 개인 브랜치에서 작업한 내용은 Github 의 feature 브랜치로 “Commit & Push” 한다.
- main 에서 작업하거나 푸시하지 않도록 주의한다.
- main 으로의 직접적인 푸시는 함께 작업하는 모든 사람들에게 conflict 를 발생시킬 수 있다.
- 필요한 경우 Github settings 에서 main 브랜치로 직접적인 푸시를 금지하는 정책을 생성하는 것도 고려한다.

#### 2.4. Pull Request 생성
- 자동으로 생성된 PR 템플릿 가이드에 따라 제목과 본문 내용을 작성한다.
- Reviewers 를 추가한다.
- 개인을 추가할 수 도 있고, 그룹을 추가할 수 있다.
- Assigees, Labels 를 추가한다.
- 향후 PR 이 많을때 쉽게 찾을 수 있다.
- 상황에 따라서 Reviewers 를 생략할 수 있다. (셀프리뷰)

#### 코드 리뷰가 불필요한 경우
- 장애 가능성이 확실하게 없는 아주 작은 변동사항
- 리뷰를 기다릴 수 없는 급박한 장애 상황 (Hotfix)
- 그래도 PR 과정은 반드시 필요하다.
- 코드의 히스토리 관리
- 급박한 상황에서 코드 롤백에 용이

#### 2.5. Merge Pull Request

- 리뷰가 완료되면 “Merge pull request” 를 통해 merge 한다.
- Merge 후 해당 이슈 종료와 함께 작업했던 feature 브랜치는 삭제한다.

#### 3. Reviewee 가이드
- Reviewer 가 쉽게 리뷰를 할 수 있도록 고민한다.
- 10~20분 안에 변동 사항을 파악할 수 있도록하여 코드 리뷰가 부담스러운 업무가 되지 않도록 노력한다.
- 하나의 리뷰에서 너무 큰 변화는 지양한다.
- 300줄 이상의 코드 변동은 가급적 지양한다.
- 변동사항이 많을 것으로 예상되는 경우 작업 단위를 쪼개는 것을 권장하지만, 부득이한 경우에는 변경사항에 대한 충분한 context 를 설명한다.
- commit message 에 신경 쓴다.
- commit message 를 잘 관리하면 특정 이슈에 대한 코드 변경 사항을 쉽게 추적할 수 있다.

#### 4. Reviewer 가이드
- 최대한 빨리 해주는 것이 좋다. (가급적 당일)
- 리뷰를 기다리는 동안 해당 작업은 blocked 상태가 되기 때문에 빠르게 피드백을 준다.
- 리뷰가 늦을 경우 언제 리뷰가 가능한지 알려준다.
- 리뷰 역시 communication 이다
- 코드 리뷰 이전에 대화에 있어 기본적인 에티켓을 지켜야 한다.
- 동료로서 Reviewer 의 좋은 코드에 대해서 칭찬을 해주는 것도 중요하다.
- 서로 생각과 지식의 차이를 인정하고 이에 대해 건강한 피드백과 좋은 타협점을 내도록 해야한다.
- 코드 리뷰 메시지에는 반드시 comment, approve, request changes 를 체크한다.
- Comment: 단순 코멘트
- Approve: 변경사항을 승인
- Request changes: 코드를 merge 하기 전에 반드시 수정되어야할 사항
- 리뷰 이후 > 브랜치 삭제 (repository로 접속 후에 branch를 선택한 후 하단에 있는 View all branches 누르면 나옴)

- 커밋 예제

ex, [#1][ADD] 데이터브릭스 가이드 문서 작성
-  [#ISSUE-ID][커밋 태그] 내용 (Issue 번호)
- 커밋 태그 : Add, Fix, Change, Improve, Migrate 중 하나로 업로드 합니다.
- Add : 주요 작업이 무언가를 추가한 것일 때
- Fix : 주요 작업이 무언가를 고친 것일 때
- Change : 주요 작업이 무언가를 변경한 것일 때
- Improve : 주요 작업이 무언가를 개선한 것일 때
- Migrate : 주요 작업이 모델을 건드린 것일 때

#### 5. 코드 리뷰 체크리스트

- [ ] 코드는 이해하기 쉽게 잘 작성되었는지?
- [ ] 중복된 코드는 아닌지?
- [ ] 네이밍은 적절한지?
- [ ] 테스트는 충분하게 수행되었는지?
- [ ] 해당 jira 이슈와 동떨어진 변경사항이 있진 않는지?
